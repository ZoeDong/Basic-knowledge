# 操作系统

## 内存管理
  1. 块式管理：
   主存分为一块块，大小固定。当所需的程序片断不在主存时就分配一块主存空间，把程序片断load入主存，就算所需的程序片度只有几个字节也只能把这一块分配给它。这样会造成很大的浪费，平均浪费了50％的内存空间，但是易于管理。
  2. 页式管理：
   主存分为一页页的，每一页的空间要比一块的空间小很多，空间利用率要比块式管理高很多。
  3. 段式管理
   主存分为一段段的，每一段的空间又要比一页的空间小很多，在空间利用率上又比页式管理高很多。但是也有另外一个缺点。一个程序片断可能会被分为几十段，这样很多时间就会被浪费在计算每一段的物理地址上。
  4. 段页式管理（常用）
   结合了段式管理和页式管理的优点。将程序分成若干段，每个段分成若干页。段页式管理每取一数据，要访问3次内存。

  - 分页和分段有什么区别
    **段式存储管理：**
    一种**符合用户视角的内存分配管理方案**。在段式存储管理中，将程序的地址空间划分为若干段（segment），如代码段，数据段，堆栈段；这样每个进程有一个二维地址空间，相互独立，互不干扰。
    **优点：**
    没有内碎片（因为段大小可变，改变段大小来消除内碎片）。但段换入换出时，会产生外碎片（比如4k的段换5k的段，会产生1k的外碎片）<p>
    **页式存储管理:**
    一种**用户视角内存与物理内存相分离的内存分配管理方案**。在页式存储管理中，将程序的逻辑地址划分为**固定大小的页（page）**，而物理内存划分为**同样大小的帧**，程序加载时，**可以将任意一页放入内存中任意一个帧**，这些帧不必连续，从而实现了离散分配。
    **优点：**
    没有外碎片（因为页的大小固定），但会产生内碎片（一个页可能填充不满）。<p>
    **两者的不同点：**
    1. 目的不同：分页是由于系统管理的需要而不是用户的需要，它是信息的物理单位；分段的目的是为了能更好地满足用户的需要，它是信息的逻辑单位，它含有一组其意义相对完整的信息；
    2. 大小不同：页的大小固定且由系统决定，而段的长度却不固定，由其所完成的功能决定； 
    3. 地址空间不同： 段向用户提供**二维地址空间**；页向用户提供的是一维地址空间；
    4. 信息共享：段是信息的逻辑单位，便于存储保护和信息的共享，页的保护和共享受到限制；
    5. 内存碎片：页式存储管理的优点是没有外碎片（因为页的大小固定），但会产生内碎片（一个页可能填充不满）；而段式管理的优点是没有内碎片（因为段大小可变，改变段大小来消除内碎片）。但段换入换出时，会产生外碎片（比如4k的段换5k的段，会产生1k的外碎片）。

## 进程/线程/协程
### 进程间通信

### 同一个进程内的子线程，堆空间和栈空间分别是共享的还是私有的？
在多线程环境下，每个线程**私有一个栈，一个程序计数器和还有寄存器**
栈和程序计数器用来保存线程的执行历史和线程的执行状态
其他的资源（比如堆、地址空间、全局变量）是由同一个进程内的多个线程共享

# TODO
进程和线程有啥区别
讲一下操作系统，进程，线程，内存，iO，死锁
写一个生产者消费者 https://www.cnblogs.com/kiplove/p/6745335.html



